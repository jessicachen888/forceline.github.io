<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
    font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
    margin: auto;
    position: relative;
    width: 960px;
}
.link {
  fill: none;
  stroke: #666;
  stroke-width: 1.5px;
  stroke-dasharray: 0,4 1;
}

text {
    font: 10px sans-serif;
}
form {
    position: absolute;
    right: 10px;
    top: 10px;
}

div#scatterplot {
    width: 300px;
    height: 200px;
    background: white;
    border: 1px solid black;
    display: none;
    position:absolute;
    }

.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

path.line {
  fill: none;
  stroke: steelblue;
  stroke-width: 1.5px;
}

path.area {
  fill: #e7e7e7;
}

.axis {
  shape-rendering: crispEdges;
}

.x.axis line {
  stroke: #fff;
}

.x.axis .minor {
  stroke-opacity: .5;
}

.x.axis path {
  fill: none;
  stroke: #000;
}


.y.axis line,
.y.axis path {
  fill: none;
  stroke: #000;
}
</style>
<h1 align='center'> Building Inspector</h1>
<div id="scatterplot">
</div>

<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
var json = {
"nodes": [
    {"id": "F1Z1", "name": "Floor 1 Zone 1", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z2", "name": "Floor 1 Zone 2", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z3", "name": "Floor 1 Zone 3", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z4", "name": "Floor 1 Zone 4", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z5", "name": "Floor 1 Zone 5", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z7", "name": "Floor 1 Zone 7", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z8A", "name": "Floor 1 Zone 8A", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1Z8B", "name": "Floor 1 Zone 8B", "group": 1, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F1", "name": "Floor 1", "group": 1},
    {"id": "F2Z1", "name": "Floor 2 Zone 1", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z2", "name": "Floor 2 Zone 2", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z3", "name": "Floor 2 Zone 3", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z4", "name": "Floor 2 Zone 4", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z5", "name": "Floor 2 Zone 5", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z6", "name": "Floor 2 Zone 6", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z7", "name": "Floor 2 Zone 7", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z8", "name": "Floor 2 Zone 8", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z9", "name": "Floor 2 Zone 9", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z10", "name": "Floor 2 Zone 10", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z11", "name": "Floor 2 Zone 11", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z12A", "name": "Floor 2 Zone 12A", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z12B", "name": "Floor 2 Zone 12B", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z12C", "name": "Floor 2 Zone 12C", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z14", "name": "Floor 2 Zone 14", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z15", "name": "Floor 2 Zone 15", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2Z16", "name": "Floor 2 Zone 16", "group": 2, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F2", "name": "Floor 2", "group": 2},
    {"id": "F3Z1", "name": "Floor 3 Zone 1", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z2", "name": "Floor 3 Zone 2", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z3", "name": "Floor 3 Zone 3", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z5", "name": "Floor 3 Zone 5", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z6", "name": "Floor 3 Zone 6", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z7", "name": "Floor 3 Zone 7", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z8", "name": "Floor 3 Zone 8", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z9", "name": "Floor 3 Zone 9", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z10", "name": "Floor 3 Zone 10", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z11A", "name": "Floor 3 Zone 11A", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z11B", "name": "Floor 3 Zone 11B", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3Z11C", "name": "Floor 3 Zone 11C", "group": 3, "Time": [], "Lights": [], "Equipment": [], "ThermoTemp": [], "ThermoCooling": [], "ThermoHeating": [], "CO2": [], "MassFlowRate": []},
    {"id": "F3", "name": "Floor 3 ", "group": 3}
  ],
  "links": [
    {"source": "F1", "target": "F1Z1", "value": 1},
    {"source": "F1", "target": "F1Z2", "value": 1},
    {"source": "F1", "target": "F1Z3", "value": 1},
    {"source": "F1", "target": "F1Z4", "value": 1},
    {"source": "F1", "target": "F1Z5", "value": 1},
    //{"source": "F1", "target": "F1Z6", "value": 1},
    {"source": "F1", "target": "F1Z7", "value": 1},
    {"source": "F1", "target": "F1Z8A", "value": 1},
    {"source": "F1", "target": "F1Z8B", "value": 1},
    {"source": "F1", "target": "F2", "value": 10},
    {"source": "F2", "target": "F2Z1", "value": 1},
    {"source": "F2", "target": "F2Z2", "value": 1},
    {"source": "F2", "target": "F2Z3", "value": 1},
    {"source": "F2", "target": "F2Z4", "value": 1},
    {"source": "F2", "target": "F2Z5", "value": 1},
    {"source": "F2", "target": "F2Z6", "value": 1},
    {"source": "F2", "target": "F2Z7", "value": 1},
    {"source": "F2", "target": "F2Z8", "value": 1},
    {"source": "F2", "target": "F2Z9", "value": 1},
    {"source": "F2", "target": "F2Z10", "value": 1},
    {"source": "F2", "target": "F2Z11", "value": 1},
    {"source": "F2", "target": "F2Z12A", "value": 1},
    {"source": "F2", "target": "F2Z12B", "value": 1},
    {"source": "F2", "target": "F2Z12C", "value": 1},
    //{"source": "F2", "target": "F2Z13", "value": 1},
    {"source": "F2", "target": "F2Z14", "value": 1},
    {"source": "F2", "target": "F2Z15", "value": 1},
    {"source": "F2", "target": "F2Z16", "value": 1},
    {"source": "F2", "target": "F3", "value": 10},
    {"source": "F3", "target": "F3Z1", "value": 1},
    {"source": "F3", "target": "F3Z2", "value": 1},
    {"source": "F3", "target": "F3Z3", "value": 1},
    //{"source": "F3", "target": "F3Z4", "value": 1},
    {"source": "F3", "target": "F3Z5", "value": 1},
    {"source": "F3", "target": "F3Z6", "value": 1},
    {"source": "F3", "target": "F3Z7", "value": 1},
    {"source": "F3", "target": "F3Z8", "value": 1},
    {"source": "F3", "target": "F3Z9", "value": 1},
    {"source": "F3", "target": "F3Z10", "value": 1},
    {"source": "F3", "target": "F3Z11A", "value": 1},
    {"source": "F3", "target": "F3Z11B", "value": 1},
    {"source": "F3", "target": "F3Z11C", "value": 1},
    //{"source": "F3", "target": "F3Z12", "value": 1},
    {"source": "F1Z1", "target": "F1Z7", "value": 2},
    //{"source": "F1Z6", "target": "F1Z5", "value": 6},
    {"source": "F1Z3", "target": "F1Z4", "value": 4},
    {"source": "F2Z1", "target": "F2Z2", "value": 2},
    {"source": "F2Z1", "target": "F2Z8", "value": 2},
    {"source": "F2Z7", "target": "F2Z8", "value": 2},
    {"source": "F2Z7", "target": "F2Z6", "value": 2},
    {"source": "F2Z3", "target": "F2Z2", "value": 2},
    {"source": "F2Z3", "target": "F2Z4", "value": 2},
    {"source": "F2Z5", "target": "F2Z6", "value": 2},
    {"source": "F2Z5", "target": "F2Z4", "value": 2},
    //{"source": "F2Z13", "target": "F2Z14", "value": 2},
    {"source": "F3Z1", "target": "F3Z2", "value": 2},
    //{"source": "F3Z12", "target": "F3Z2", "value": 2},
    {"source": "F3Z1", "target": "F3Z8", "value": 2},
    {"source": "F3Z7", "target": "F3Z8", "value": 2},
    {"source": "F3Z7", "target": "F3Z6", "value": 2},
    //{"source": "F3Z12", "target": "F3Z6", "value": 2},
    //{"source": "F3Z4", "target": "F3Z5", "value": 2},
    {"source": "F3Z9", "target": "F3Z10", "value": 2} 
  ]
}

var width = 1500,
    height = 1500;

var data;
d3.csv("bldg-MC2.csv", function(result){
    result.map(function(d) {
        json.nodes[0].Time.push(+d['Index']);
        json.nodes[0].Lights.push(+d[' F_1_Z_1: Lights Power']);
        json.nodes[0].Equipment.push(+d[' F_1_Z_1: Equipment Power']);
        json.nodes[0].ThermoTemp.push(+d[' F_1_Z_1: Thermostat Temp']);
        json.nodes[0].ThermoCooling.push(+d[' F_1_Z_1: Thermostat Cooling Setpoint']);
        json.nodes[0].ThermoHeating.push(+d[' F_1_Z_1: Thermostat Heating Setpoint']);
        json.nodes[0].CO2.push(+d[' F_1_Z_1 RETURN OUTLET CO2 Concentration']);
        json.nodes[0].MassFlowRate.push(+d[' F_1_Z_1 SUPPLY INLET Mass Flow Rate']);
        json.nodes[1].Time.push(+d['Index']);
        json.nodes[1].Lights.push(+d[' F_1_Z_2: Lights Power']);
        json.nodes[1].Equipment.push(+d[' F_1_Z_2: Equipment Power']);
        json.nodes[1].ThermoTemp.push(+d[' F_1_Z_2: Thermostat Temp']);
        json.nodes[1].ThermoCooling.push(+d[' F_1_Z_2: Thermostat Cooling Setpoint']);
        json.nodes[1].ThermoHeating.push(+d[' F_1_Z_2: Thermostat Heating Setpoint']);
        json.nodes[1].CO2.push(+d[' F_1_Z_2 RETURN OUTLET CO2 Concentration']);
        json.nodes[1].MassFlowRate.push(+d[' F_1_Z_2 SUPPLY INLET Mass Flow Rate']);
        json.nodes[2].Time.push(+d['Index']);
        json.nodes[2].Lights.push(+d[' F_1_Z_3: Lights Power']);
        json.nodes[2].Equipment.push(+d[' F_1_Z_3: Equipment Power']);
        json.nodes[2].ThermoTemp.push(+d[' F_1_Z_3: Thermostat Temp']);
        json.nodes[2].ThermoCooling.push(+d[' F_1_Z_3: Thermostat Cooling Setpoint']);
        json.nodes[2].ThermoHeating.push(+d[' F_1_Z_3: Thermostat Heating Setpoint']);
        json.nodes[2].CO2.push(+d[' F_1_Z_3 RETURN OUTLET CO2 Concentration']);
        json.nodes[2].MassFlowRate.push(+d[' F_1_Z_3 SUPPLY INLET Mass Flow Rate']);
        json.nodes[3].Time.push(+d['Index']);
        json.nodes[3].Lights.push(+d[' F_1_Z_4: Lights Power']);
        json.nodes[3].Equipment.push(+d[' F_1_Z_4: Equipment Power']);
        json.nodes[3].ThermoTemp.push(+d[' F_1_Z_4: Thermostat Temp']);
        json.nodes[3].ThermoCooling.push(+d[' F_1_Z_4: Thermostat Cooling Setpoint']);
        json.nodes[3].ThermoHeating.push(+d[' F_1_Z_4: Thermostat Heating Setpoint']);
        json.nodes[3].CO2.push(+d[' F_1_Z_4 RETURN OUTLET CO2 Concentration']);
        json.nodes[3].MassFlowRate.push(+d[' F_1_Z_4 SUPPLY INLET Mass Flow Rate']);
        json.nodes[4].Time.push(+d['Index']);
        json.nodes[4].Lights.push(+d[' F_1_Z_5: Lights Power']);
        json.nodes[4].Equipment.push(+d[' F_1_Z_5: Equipment Power']);
        json.nodes[4].ThermoTemp.push(+d[' F_1_Z_5: Thermostat Temp']);
        json.nodes[4].ThermoCooling.push(+d[' F_1_Z_5: Thermostat Cooling Setpoint']);
        json.nodes[4].ThermoHeating.push(+d[' F_1_Z_5: Thermostat Heating Setpoint']);
        json.nodes[4].CO2.push(+d[' F_1_Z_5 RETURN OUTLET CO2 Concentration']);
        json.nodes[4].MassFlowRate.push(+d[' F_1_Z_5 SUPPLY INLET Mass Flow Rate']);
        json.nodes[5].Time.push(+d['Index']);
        json.nodes[5].Lights.push(+d[' F_1_Z_7: Lights Power']);
        json.nodes[5].Equipment.push(+d[' F_1_Z_7: Equipment Power']);
        json.nodes[5].ThermoTemp.push(+d[' F_1_Z_7: Thermostat Temp']);
        json.nodes[5].ThermoCooling.push(+d[' F_1_Z_7: Thermostat Cooling Setpoint']);
        json.nodes[5].ThermoHeating.push(+d[' F_1_Z_7: Thermostat Heating Setpoint']);
        json.nodes[5].CO2.push(+d[' F_1_Z_7 RETURN OUTLET CO2 Concentration']);
        json.nodes[5].MassFlowRate.push(+d[' F_1_Z_7 SUPPLY INLET Mass Flow Rate']);
        json.nodes[6].Time.push(+d['Index']);
        json.nodes[6].Lights.push(+d[' F_1_Z_8A: Lights Power']);
        json.nodes[6].Equipment.push(+d[' F_1_Z_8A: Equipment Power']);
        json.nodes[6].ThermoTemp.push(+d[' F_1_Z_8A: Thermostat Temp']);
        json.nodes[6].ThermoCooling.push(+d[' F_1_Z_8A: Thermostat Cooling Setpoint']);
        json.nodes[6].ThermoHeating.push(+d[' F_1_Z_8A: Thermostat Heating Setpoint']);
        json.nodes[6].CO2.push(+d[' F_1_Z_8A RETURN OUTLET CO2 Concentration']);
        json.nodes[6].MassFlowRate.push(+d[' F_1_Z_8A SUPPLY INLET Mass Flow Rate']);
        json.nodes[7].Time.push(+d['Index']);
        json.nodes[7].Lights.push(+d[' F_1_Z_8B: Lights Power']);
        json.nodes[7].Equipment.push(+d[' F_1_Z_8B: Equipment Power']);
        json.nodes[7].ThermoTemp.push(+d[' F_1_Z_8B: Thermostat Temp']);
        json.nodes[7].ThermoCooling.push(+d[' F_1_Z_8B: Thermostat Cooling Setpoint']);
        json.nodes[7].ThermoHeating.push(+d[' F_1_Z_8B: Thermostat Heating Setpoint']);
        json.nodes[7].CO2.push(+d[' F_1_Z_8B RETURN OUTLET CO2 Concentration']);
        json.nodes[7].MassFlowRate.push(+d[' F_1_Z_8B SUPPLY INLET Mass Flow Rate']);
        json.nodes[9].Time.push(+d['Index']);
        json.nodes[9].Lights.push(+d[' F_2_Z_1: Lights Power']);
        json.nodes[9].Equipment.push(+d[' F_2_Z_1: Equipment Power']);
        json.nodes[9].ThermoTemp.push(+d[' F_2_Z_1: Thermostat Temp']);
        json.nodes[9].ThermoCooling.push(+d[' F_2_Z_1: Thermostat Cooling Setpoint']);
        json.nodes[9].ThermoHeating.push(+d[' F_2_Z_1: Thermostat Heating Setpoint']);
        json.nodes[9].CO2.push(+d[' F_2_Z_1 RETURN OUTLET CO2 Concentration']);
        json.nodes[9].MassFlowRate.push(+d[' F_2_Z_1 SUPPLY INLET Mass Flow Rate']);
        json.nodes[10].Time.push(+d['Index']);
        json.nodes[10].Lights.push(+d[' F_2_Z_2: Lights Power']);
        json.nodes[10].Equipment.push(+d[' F_2_Z_2: Equipment Power']);
        json.nodes[10].ThermoTemp.push(+d[' F_2_Z_2: Thermostat Temp']);
        json.nodes[10].ThermoCooling.push(+d[' F_2_Z_2: Thermostat Cooling Setpoint']);
        json.nodes[10].ThermoHeating.push(+d[' F_2_Z_2: Thermostat Heating Setpoint']);
        json.nodes[10].CO2.push(+d[' F_2_Z_2 RETURN OUTLET CO2 Concentration']);
        json.nodes[10].MassFlowRate.push(+d[' F_2_Z_2 SUPPLY INLET Mass Flow Rate']);
        json.nodes[11].Time.push(+d['Index']);
        json.nodes[11].Lights.push(+d[' F_2_Z_3: Lights Power']);
        json.nodes[11].Equipment.push(+d[' F_2_Z_3: Equipment Power']);
        json.nodes[11].ThermoTemp.push(+d[' F_2_Z_3: Thermostat Temp']);
        json.nodes[11].ThermoCooling.push(+d[' F_2_Z_3: Thermostat Cooling Setpoint']);
        json.nodes[11].ThermoHeating.push(+d[' F_2_Z_3: Thermostat Heating Setpoint']);
        json.nodes[11].CO2.push(+d[' F_2_Z_3 RETURN OUTLET CO2 Concentration']);
        json.nodes[11].MassFlowRate.push(+d[' F_2_Z_3 SUPPLY INLET Mass Flow Rate']);
        json.nodes[12].Time.push(+d['Index']);
        json.nodes[12].Lights.push(+d[' F_2_Z_4: Lights Power']);
        json.nodes[12].Equipment.push(+d[' F_2_Z_4: Equipment Power']);
        json.nodes[12].ThermoTemp.push(+d[' F_2_Z_4: Thermostat Temp']);
        json.nodes[12].ThermoCooling.push(+d[' F_2_Z_4: Thermostat Cooling Setpoint']);
        json.nodes[12].ThermoHeating.push(+d[' F_2_Z_4: Thermostat Heating Setpoint']);
        json.nodes[12].CO2.push(+d[' F_2_Z_4 RETURN OUTLET CO2 Concentration']);
        json.nodes[12].MassFlowRate.push(+d[' F_2_Z_4 SUPPLY INLET Mass Flow Rate']);
        json.nodes[13].Time.push(+d['Index']);
        json.nodes[13].Lights.push(+d[' F_2_Z_5: Lights Power']);
        json.nodes[13].Equipment.push(+d[' F_2_Z_5: Equipment Power']);
        json.nodes[13].ThermoTemp.push(+d[' F_2_Z_5: Thermostat Temp']);
        json.nodes[13].ThermoCooling.push(+d[' F_2_Z_5: Thermostat Cooling Setpoint']);
        json.nodes[13].ThermoHeating.push(+d[' F_2_Z_5: Thermostat Heating Setpoint']);
        json.nodes[13].CO2.push(+d[' F_2_Z_5 RETURN OUTLET CO2 Concentration']);
        json.nodes[13].MassFlowRate.push(+d[' F_2_Z_5 SUPPLY INLET Mass Flow Rate']);
        json.nodes[14].Time.push(+d['Index']);
        json.nodes[14].Lights.push(+d[' F_2_Z_6: Lights Power']);
        json.nodes[14].Equipment.push(+d[' F_2_Z_6: Equipment Power']);
        json.nodes[14].ThermoTemp.push(+d[' F_2_Z_6: Thermostat Temp']);
        json.nodes[14].ThermoCooling.push(+d[' F_2_Z_6: Thermostat Cooling Setpoint']);
        json.nodes[14].ThermoHeating.push(+d[' F_2_Z_6: Thermostat Heating Setpoint']);
        json.nodes[14].CO2.push(+d[' F_2_Z_6 RETURN OUTLET CO2 Concentration']);
        json.nodes[14].MassFlowRate.push(+d[' F_2_Z_6 SUPPLY INLET Mass Flow Rate']);
        json.nodes[15].Time.push(+d['Index']);
        json.nodes[15].Lights.push(+d[' F_2_Z_7: Lights Power']);
        json.nodes[15].Equipment.push(+d[' F_2_Z_7: Equipment Power']);
        json.nodes[15].ThermoTemp.push(+d[' F_2_Z_7: Thermostat Temp']);
        json.nodes[15].ThermoCooling.push(+d[' F_2_Z_7: Thermostat Cooling Setpoint']);
        json.nodes[15].ThermoHeating.push(+d[' F_2_Z_7: Thermostat Heating Setpoint']);
        json.nodes[15].CO2.push(+d[' F_2_Z_7 RETURN OUTLET CO2 Concentration']);
        json.nodes[15].MassFlowRate.push(+d[' F_2_Z_7 SUPPLY INLET Mass Flow Rate']);
        json.nodes[16].Time.push(+d['Index']);
        json.nodes[16].Lights.push(+d[' F_2_Z_8: Lights Power']);
        json.nodes[16].Equipment.push(+d[' F_2_Z_8: Equipment Power']);
        json.nodes[16].ThermoTemp.push(+d[' F_2_Z_8: Thermostat Temp']);
        json.nodes[16].ThermoCooling.push(+d[' F_2_Z_8: Thermostat Cooling Setpoint']);
        json.nodes[16].ThermoHeating.push(+d[' F_2_Z_8: Thermostat Heating Setpoint']);
        json.nodes[16].CO2.push(+d[' F_2_Z_8 RETURN OUTLET CO2 Concentration']);
        json.nodes[16].MassFlowRate.push(+d[' F_2_Z_8 SUPPLY INLET Mass Flow Rate']);
        json.nodes[17].Time.push(+d['Index']);
        json.nodes[17].Lights.push(+d[' F_2_Z_9: Lights Power']);
        json.nodes[17].Equipment.push(+d[' F_2_Z_9: Equipment Power']);
        json.nodes[17].ThermoTemp.push(+d[' F_2_Z_9: Thermostat Temp']);
        json.nodes[17].ThermoCooling.push(+d[' F_2_Z_9: Thermostat Cooling Setpoint']);
        json.nodes[17].ThermoHeating.push(+d[' F_2_Z_9: Thermostat Heating Setpoint']);
        json.nodes[17].CO2.push(+d[' F_2_Z_9 RETURN OUTLET CO2 Concentration']);
        json.nodes[17].MassFlowRate.push(+d[' F_2_Z_9 SUPPLY INLET Mass Flow Rate']);
        json.nodes[18].Time.push(+d['Index']);
        json.nodes[18].Lights.push(+d[' F_2_Z_10: Lights Power']);
        json.nodes[18].Equipment.push(+d[' F_2_Z_10: Equipment Power']);
        json.nodes[18].ThermoTemp.push(+d[' F_2_Z_10: Thermostat Temp']);
        json.nodes[18].ThermoCooling.push(+d[' F_2_Z_10: Thermostat Cooling Setpoint']);
        json.nodes[18].ThermoHeating.push(+d[' F_2_Z_10: Thermostat Heating Setpoint']);
        json.nodes[18].CO2.push(+d[' F_2_Z_10 RETURN OUTLET CO2 Concentration']);
        json.nodes[18].MassFlowRate.push(+d[' F_2_Z_10 SUPPLY INLET Mass Flow Rate']);
        json.nodes[19].Time.push(+d['Index']);
        json.nodes[19].Lights.push(+d[' F_2_Z_11: Lights Power']);
        json.nodes[19].Equipment.push(+d[' F_2_Z_11: Equipment Power']);
        json.nodes[19].ThermoTemp.push(+d[' F_2_Z_11: Thermostat Temp']);
        json.nodes[19].ThermoCooling.push(+d[' F_2_Z_11: Thermostat Cooling Setpoint']);
        json.nodes[19].ThermoHeating.push(+d[' F_2_Z_11: Thermostat Heating Setpoint']);
        json.nodes[19].CO2.push(+d[' F_2_Z_11 RETURN OUTLET CO2 Concentration']);
        json.nodes[19].MassFlowRate.push(+d[' F_2_Z_11 SUPPLY INLET Mass Flow Rate']);
        json.nodes[20].Time.push(+d['Index']);
        json.nodes[20].Lights.push(+d[' F_2_Z_12A: Lights Power']);
        json.nodes[20].Equipment.push(+d[' F_2_Z_12A: Equipment Power']);
        json.nodes[20].ThermoTemp.push(+d[' F_2_Z_12A: Thermostat Temp']);
        json.nodes[20].ThermoCooling.push(+d[' F_2_Z_12A: Thermostat Cooling Setpoint']);
        json.nodes[20].ThermoHeating.push(+d[' F_2_Z_12A: Thermostat Heating Setpoint']);
        json.nodes[20].CO2.push(+d[' F_2_Z_12A RETURN OUTLET CO2 Concentration']);
        json.nodes[20].MassFlowRate.push(+d[' F_2_Z_12A SUPPLY INLET Mass Flow Rate']);
        json.nodes[21].Time.push(+d['Index']);
        json.nodes[21].Lights.push(+d[' F_2_Z_12B: Lights Power']);
        json.nodes[21].Equipment.push(+d[' F_2_Z_12B: Equipment Power']);
        json.nodes[21].ThermoTemp.push(+d[' F_2_Z_12B: Thermostat Temp']);
        json.nodes[21].ThermoCooling.push(+d[' F_2_Z_12B: Thermostat Cooling Setpoint']);
        json.nodes[21].ThermoHeating.push(+d[' F_2_Z_12B: Thermostat Heating Setpoint']);
        json.nodes[21].CO2.push(+d[' F_2_Z_12B RETURN OUTLET CO2 Concentration']);
        json.nodes[21].MassFlowRate.push(+d[' F_2_Z_12B SUPPLY INLET Mass Flow Rate']);
        json.nodes[22].Time.push(+d['Index']);
        json.nodes[22].Lights.push(+d[' F_2_Z_12C: Lights Power']);
        json.nodes[22].Equipment.push(+d[' F_2_Z_12C: Equipment Power']);
        json.nodes[22].ThermoTemp.push(+d[' F_2_Z_12C: Thermostat Temp']);
        json.nodes[22].ThermoCooling.push(+d[' F_2_Z_12C: Thermostat Cooling Setpoint']);
        json.nodes[22].ThermoHeating.push(+d[' F_2_Z_12C: Thermostat Heating Setpoint']);
        json.nodes[22].CO2.push(+d[' F_2_Z_12C RETURN OUTLET CO2 Concentration']);
        json.nodes[22].MassFlowRate.push(+d[' F_2_Z_12C SUPPLY INLET Mass Flow Rate']);
        json.nodes[23].Time.push(+d['Index']);
        json.nodes[23].Lights.push(+d[' F_2_Z_14: Lights Power']);
        json.nodes[23].Equipment.push(+d[' F_2_Z_14: Equipment Power']);
        json.nodes[23].ThermoTemp.push(+d[' F_2_Z_14: Thermostat Temp']);
        json.nodes[23].ThermoCooling.push(+d[' F_2_Z_14: Thermostat Cooling Setpoint']);
        json.nodes[23].ThermoHeating.push(+d[' F_2_Z_14: Thermostat Heating Setpoint']);
        json.nodes[23].CO2.push(+d[' F_2_Z_14 RETURN OUTLET CO2 Concentration']);
        json.nodes[23].MassFlowRate.push(+d[' F_2_Z_14 SUPPLY INLET Mass Flow Rate']);
        json.nodes[24].Time.push(+d['Index']);
        json.nodes[24].Lights.push(+d[' F_2_Z_15: Lights Power']);
        json.nodes[24].Equipment.push(+d[' F_2_Z_15: Equipment Power']);
        json.nodes[24].ThermoTemp.push(+d[' F_2_Z_15: Thermostat Temp']);
        json.nodes[24].ThermoCooling.push(+d[' F_2_Z_15: Thermostat Cooling Setpoint']);
        json.nodes[24].ThermoHeating.push(+d[' F_2_Z_15: Thermostat Heating Setpoint']);
        json.nodes[24].CO2.push(+d[' F_2_Z_15 RETURN OUTLET CO2 Concentration']);
        json.nodes[24].MassFlowRate.push(+d[' F_2_Z_15 SUPPLY INLET Mass Flow Rate']);
        json.nodes[25].Time.push(+d['Index']);
        json.nodes[25].Lights.push(+d[' F_2_Z_16: Lights Power']);
        json.nodes[25].Equipment.push(+d[' F_2_Z_16: Equipment Power']);
        json.nodes[25].ThermoTemp.push(+d[' F_2_Z_16: Thermostat Temp']);
        json.nodes[25].ThermoCooling.push(+d[' F_2_Z_16: Thermostat Cooling Setpoint']);
        json.nodes[25].ThermoHeating.push(+d[' F_2_Z_16: Thermostat Heating Setpoint']);
        json.nodes[25].CO2.push(+d[' F_2_Z_16 RETURN OUTLET CO2 Concentration']);
        json.nodes[25].MassFlowRate.push(+d[' F_2_Z_16 SUPPLY INLET Mass Flow Rate']);
        json.nodes[27].Time.push(+d['Index']);
        json.nodes[27].Lights.push(+d[' F_3_Z_1: Lights Power']);
        json.nodes[27].Equipment.push(+d[' F_3_Z_1: Equipment Power']);
        json.nodes[27].ThermoTemp.push(+d[' F_3_Z_1: Thermostat Temp']);
        json.nodes[27].ThermoCooling.push(+d[' F_3_Z_1: Thermostat Cooling Setpoint']);
        json.nodes[27].ThermoHeating.push(+d[' F_3_Z_1: Thermostat Heating Setpoint']);
        json.nodes[27].CO2.push(+d[' F_3_Z_1 RETURN OUTLET CO2 Concentration']);
        json.nodes[27].MassFlowRate.push(+d[' F_3_Z_1 SUPPLY INLET Mass Flow Rate']);
        json.nodes[28].Time.push(+d['Index']);
        json.nodes[28].Lights.push(+d[' F_3_Z_2: Lights Power']);
        json.nodes[28].Equipment.push(+d[' F_3_Z_2: Equipment Power']);
        json.nodes[28].ThermoTemp.push(+d[' F_3_Z_2: Thermostat Temp']);
        json.nodes[28].ThermoCooling.push(+d[' F_3_Z_2: Thermostat Cooling Setpoint']);
        json.nodes[28].ThermoHeating.push(+d[' F_3_Z_2: Thermostat Heating Setpoint']);
        json.nodes[28].CO2.push(+d[' F_3_Z_2 RETURN OUTLET CO2 Concentration']);
        json.nodes[28].MassFlowRate.push(+d[' F_3_Z_2 SUPPLY INLET Mass Flow Rate']);
        json.nodes[29].Time.push(+d['Index']);
        json.nodes[29].Lights.push(+d[' F_3_Z_3: Lights Power']);
        json.nodes[29].Equipment.push(+d[' F_3_Z_3: Equipment Power']);
        json.nodes[29].ThermoTemp.push(+d[' F_3_Z_3: Thermostat Temp']);
        json.nodes[29].ThermoCooling.push(+d[' F_3_Z_3: Thermostat Cooling Setpoint']);
        json.nodes[29].ThermoHeating.push(+d[' F_3_Z_3: Thermostat Heating Setpoint']);
        json.nodes[29].CO2.push(+d[' F_3_Z_3 RETURN OUTLET CO2 Concentration']);
        json.nodes[29].MassFlowRate.push(+d[' F_3_Z_3 SUPPLY INLET Mass Flow Rate']);
        json.nodes[30].Time.push(+d['Index']);
        json.nodes[30].Lights.push(+d[' F_3_Z_5: Lights Power']);
        json.nodes[30].Equipment.push(+d[' F_3_Z_5: Equipment Power']);
        json.nodes[30].ThermoTemp.push(+d[' F_3_Z_5: Thermostat Temp']);
        json.nodes[30].ThermoCooling.push(+d[' F_3_Z_5: Thermostat Cooling Setpoint']);
        json.nodes[30].ThermoHeating.push(+d[' F_3_Z_5: Thermostat Heating Setpoint']);
        json.nodes[30].CO2.push(+d[' F_3_Z_5 RETURN OUTLET CO2 Concentration']);
        json.nodes[30].MassFlowRate.push(+d[' F_3_Z_5 SUPPLY INLET Mass Flow Rate']);
        json.nodes[31].Time.push(+d['Index']);
        json.nodes[31].Lights.push(+d[' F_3_Z_6: Lights Power']);
        json.nodes[31].Equipment.push(+d[' F_3_Z_6: Equipment Power']);
        json.nodes[31].ThermoTemp.push(+d[' F_3_Z_6: Thermostat Temp']);
        json.nodes[31].ThermoCooling.push(+d[' F_3_Z_6: Thermostat Cooling Setpoint']);
        json.nodes[31].ThermoHeating.push(+d[' F_3_Z_6: Thermostat Heating Setpoint']);
        json.nodes[31].CO2.push(+d[' F_3_Z_6 RETURN OUTLET CO2 Concentration']);
        json.nodes[31].MassFlowRate.push(+d[' F_3_Z_6 SUPPLY INLET Mass Flow Rate']);
        json.nodes[32].Time.push(+d['Index']);
        json.nodes[32].Lights.push(+d[' F_3_Z_7: Lights Power']);
        json.nodes[32].Equipment.push(+d[' F_3_Z_7: Equipment Power']);
        json.nodes[32].ThermoTemp.push(+d[' F_3_Z_7: Thermostat Temp']);
        json.nodes[32].ThermoCooling.push(+d[' F_3_Z_7: Thermostat Cooling Setpoint']);
        json.nodes[32].ThermoHeating.push(+d[' F_3_Z_7: Thermostat Heating Setpoint']);
        json.nodes[32].CO2.push(+d[' F_3_Z_7 RETURN OUTLET CO2 Concentration']);
        json.nodes[32].MassFlowRate.push(+d[' F_3_Z_7 SUPPLY INLET Mass Flow Rate']);
        json.nodes[33].Time.push(+d['Index']);
        json.nodes[33].Lights.push(+d[' F_3_Z_8: Lights Power']);
        json.nodes[33].Equipment.push(+d[' F_3_Z_8: Equipment Power']);
        json.nodes[33].ThermoTemp.push(+d[' F_3_Z_8: Thermostat Temp']);
        json.nodes[33].ThermoCooling.push(+d[' F_3_Z_8: Thermostat Cooling Setpoint']);
        json.nodes[33].ThermoHeating.push(+d[' F_3_Z_8: Thermostat Heating Setpoint']);
        json.nodes[33].CO2.push(+d[' F_3_Z_8 RETURN OUTLET CO2 Concentration']);
        json.nodes[33].MassFlowRate.push(+d[' F_3_Z_8 SUPPLY INLET Mass Flow Rate']);
        json.nodes[34].Time.push(+d['Index']);
        json.nodes[34].Lights.push(+d[' F_3_Z_9: Lights Power']);
        json.nodes[34].Equipment.push(+d[' F_3_Z_9: Equipment Power']);
        json.nodes[34].ThermoTemp.push(+d[' F_3_Z_9: Thermostat Temp']);
        json.nodes[34].ThermoCooling.push(+d[' F_3_Z_9: Thermostat Cooling Setpoint']);
        json.nodes[34].ThermoHeating.push(+d[' F_3_Z_9: Thermostat Heating Setpoint']);
        json.nodes[34].CO2.push(+d[' F_3_Z_9 RETURN OUTLET CO2 Concentration']);
        json.nodes[34].MassFlowRate.push(+d[' F_3_Z_9 SUPPLY INLET Mass Flow Rate']);
        json.nodes[35].Time.push(+d['Index']);
        json.nodes[35].Lights.push(+d[' F_3_Z_10: Lights Power']);
        json.nodes[35].Equipment.push(+d[' F_3_Z_10: Equipment Power']);
        json.nodes[35].ThermoTemp.push(+d[' F_3_Z_10: Thermostat Temp']);
        json.nodes[35].ThermoCooling.push(+d[' F_3_Z_10: Thermostat Cooling Setpoint']);
        json.nodes[35].ThermoHeating.push(+d[' F_3_Z_10: Thermostat Heating Setpoint']);
        json.nodes[35].CO2.push(+d[' F_3_Z_10 RETURN OUTLET CO2 Concentration']);
        json.nodes[35].MassFlowRate.push(+d[' F_3_Z_10 SUPPLY INLET Mass Flow Rate']);
        json.nodes[36].Time.push(+d['Index']);
        json.nodes[36].Lights.push(+d[' F_3_Z_11A: Lights Power']);
        json.nodes[36].Equipment.push(+d[' F_3_Z_11A: Equipment Power']);
        json.nodes[36].ThermoTemp.push(+d[' F_3_Z_11A: Thermostat Temp']);
        json.nodes[36].ThermoCooling.push(+d[' F_3_Z_11A: Thermostat Cooling Setpoint']);
        json.nodes[36].ThermoHeating.push(+d[' F_3_Z_11A: Thermostat Heating Setpoint']);
        json.nodes[36].CO2.push(+d[' F_3_Z_11A RETURN OUTLET CO2 Concentration']);
        json.nodes[36].MassFlowRate.push(+d[' F_3_Z_11A SUPPLY INLET Mass Flow Rate']);
        json.nodes[37].Time.push(+d['Index']);
        json.nodes[37].Lights.push(+d[' F_3_Z_11B: Lights Power']);
        json.nodes[37].Equipment.push(+d[' F_3_Z_11B: Equipment Power']);
        json.nodes[37].ThermoTemp.push(+d[' F_3_Z_11B: Thermostat Temp']);
        json.nodes[37].ThermoCooling.push(+d[' F_3_Z_11B: Thermostat Cooling Setpoint']);
        json.nodes[37].ThermoHeating.push(+d[' F_3_Z_11B: Thermostat Heating Setpoint']);
        json.nodes[37].CO2.push(+d[' F_3_Z_11B RETURN OUTLET CO2 Concentration']);
        json.nodes[37].MassFlowRate.push(+d[' F_3_Z_11B SUPPLY INLET Mass Flow Rate']);
        json.nodes[38].Time.push(+d['Index']);
        json.nodes[38].Lights.push(+d[' F_3_Z_11C: Lights Power']);
        json.nodes[38].Equipment.push(+d[' F_3_Z_11C: Equipment Power']);
        json.nodes[38].ThermoTemp.push(+d[' F_3_Z_11C: Thermostat Temp']);
        json.nodes[38].ThermoCooling.push(+d[' F_3_Z_11C: Thermostat Cooling Setpoint']);
        json.nodes[38].ThermoHeating.push(+d[' F_3_Z_11C: Thermostat Heating Setpoint']);
        json.nodes[38].CO2.push(+d[' F_3_Z_11C RETURN OUTLET CO2 Concentration']);
        json.nodes[38].MassFlowRate.push(+d[' F_3_Z_11C SUPPLY INLET Mass Flow Rate'])
    })
})

var zoneData2;
d3.csv("bldg-MC2.csv", function(result){
                dataloaded(result);
            })
        
function dataloaded(result){
         zoneData2 = result.map(function(d){
            return {
                        Time: d['Index'],
                        F1Z1Light: +d[' F_1_Z_1: Lights Power'],
                        F1Z1Equip: +d[' F_1_Z_1: Equipment Power'],
                        F1Z1Ther: +d[' F_1_Z_1: Thermostat Temp'],
                        F1Z1TherC: +d[' F_1_Z_1: Thermostat Cooling Setpoint'],
                        F1Z1TherH: +d[' F_1_Z_1: Thermostat Heating Setpoint'],
                        F1Z1CO2: +d[' F_1_Z_1 RETURN OUTLET CO2 Concentration'],
                        F1Z1Mas: +d[' F_1_Z_1 SUPPLY INLET Mass Flow Rate'],
                        F1Z2Light: +d[' F_1_Z_2: Lights Power'],
                        F1Z2Equip: +d[' F_1_Z_2: Equipment Power'],
                        F1Z2Ther: +d[' F_1_Z_2: Thermostat Temp'],
                        F1Z2TherC: +d[' F_1_Z_2: Thermostat Cooling Setpoint'],
                        F1Z2TherH: +d[' F_1_Z_2: Thermostat Heating Setpoint'],
                        F1Z2CO2: +d[' F_1_Z_2 RETURN OUTLET CO2 Concentration'],
                        F1Z2Mas: +d[' F_1_Z_2 SUPPLY INLET Mass Flow Rate'],
                        F1Z3Light: +d[' F_1_Z_3: Lights Power'],
                        F1Z3Equip: +d[' F_1_Z_3: Equipment Power'],
                        F1Z3Ther: +d[' F_1_Z_3: Thermostat Temp'],
                        F1Z3TherC: +d[' F_1_Z_3: Thermostat Cooling Setpoint'],
                        F1Z3TherH: +d[' F_1_Z_3: Thermostat Heating Setpoint'],
                        F1Z3CO2: +d[' F_1_Z_3 RETURN OUTLET CO2 Concentration'],
                        F1Z3Mas: +d[' F_1_Z_3 SUPPLY INLET Mass Flow Rate'],
                        F1Z4Light: +d[' F_1_Z_4: Lights Power'],
                        F1Z4Equip: +d[' F_1_Z_4: Equipment Power'],
                        F1Z4Ther: +d[' F_1_Z_4: Thermostat Temp'],
                        F1Z4TherC: +d[' F_1_Z_4: Thermostat Cooling Setpoint'],
                        F1Z4TherH: +d[' F_1_Z_4: Thermostat Heating Setpoint'],
                        F1Z4CO2: +d[' F_1_Z_4 RETURN OUTLET CO2 Concentration'],
                        F1Z4Mas: +d[' F_1_Z_4 SUPPLY INLET Mass Flow Rate'],
                        F1Z5Light: +d[' F_1_Z_5: Lights Power'],
                        F1Z5Equip: +d[' F_1_Z_5: Equipment Power'],
                        F1Z5Ther: +d[' F_1_Z_5: Thermostat Temp'],
                        F1Z5TherC: +d[' F_1_Z_5: Thermostat Cooling Setpoint'],
                        F1Z5TherH: +d[' F_1_Z_5: Thermostat Heating Setpoint'],
                        F1Z5CO2: +d[' F_1_Z_5 RETURN OUTLET CO2 Concentration'],
                        F1Z5Mas: +d[' F_1_Z_5 SUPPLY INLET Mass Flow Rate'],
                        F1Z7Light: +d[' F_1_Z_7: Lights Power'],
                        F1Z7Equip: +d[' F_1_Z_7: Equipment Power'],
                        F1Z7Ther: +d[' F_1_Z_7: Thermostat Temp'],
                        F1Z7TherC: +d[' F_1_Z_7: Thermostat Cooling Setpoint'],
                        F1Z7TherH: +d[' F_1_Z_7: Thermostat Heating Setpoint'],
                        F1Z7CO2: +d[' F_1_Z_7 RETURN OUTLET CO2 Concentration'],
                        F1Z7Mas: +d[' F_1_Z_7 SUPPLY INLET Mass Flow Rate'],
                        F1Z8ALight: +d[' F_1_Z_8A: Lights Power'],
                        F1Z8AEquip: +d[' F_1_Z_8A: Equipment Power'],
                        F1Z8ATher: +d[' F_1_Z_8A: Thermostat Temp'],
                        F1Z8ATherC: +d[' F_1_Z_8A: Thermostat Cooling Setpoint'],
                        F1Z8ATherH: +d[' F_1_Z_8A: Thermostat Heating Setpoint'],
                        F1Z8ACO2: +d[' F_1_Z_8A RETURN OUTLET CO2 Concentration'],
                        F1Z8AMas: +d[' F_1_Z_8A SUPPLY INLET Mass Flow Rate'],
                        F1Z8BLight: +d[' F_1_Z_8B: Lights Power'],
                        F1Z8BEquip: +d[' F_1_Z_8B: Equipment Power'],
                        F1Z8BTher: +d[' F_1_Z_8B: Thermostat Temp'],
                        F1Z8BTherC: +d[' F_1_Z_8B: Thermostat Cooling Setpoint'],
                        F1Z8BTherH: +d[' F_1_Z_8B: Thermostat Heating Setpoint'],
                        F1Z8BCO2: +d[' F_1_Z_8B RETURN OUTLET CO2 Concentration'],
                        F1Z8BMas: +d[' F_1_Z_8B SUPPLY INLET Mass Flow Rate'],
                        F2Z1Light: +d[' F_2_Z_1: Lights Power'],
                        F2Z1Equip: +d[' F_2_Z_1: Equipment Power'],
                        F2Z1Ther: +d[' F_2_Z_1: Thermostat Temp'],
                        F2Z1TherC: +d[' F_2_Z_1: Thermostat Cooling Setpoint'],
                        F2Z1TherH: +d[' F_2_Z_1: Thermostat Heating Setpoint'],
                        F2Z1CO2: +d[' F_2_Z_1 RETURN OUTLET CO2 Concentration'],
                        F2Z1Mas: +d[' F_2_Z_1 SUPPLY INLET Mass Flow Rate'],
                        F2Z2Light: +d[' F_2_Z_2: Lights Power'],
                        F2Z2Equip: +d[' F_2_Z_2: Equipment Power'],
                        F2Z2Ther: +d[' F_2_Z_2: Thermostat Temp'],
                        F2Z2TherC: +d[' F_2_Z_2: Thermostat Cooling Setpoint'],
                        F2Z2TherH: +d[' F_2_Z_2: Thermostat Heating Setpoint'],
                        F2Z2CO2: +d[' F_2_Z_2 RETURN OUTLET CO2 Concentration'],
                        F2Z2Mas: +d[' F_2_Z_2 SUPPLY INLET Mass Flow Rate'],
                        F2Z3Light: +d[' F_2_Z_3: Lights Power'],
                        F2Z3Equip: +d[' F_2_Z_3: Equipment Power'],
                        F2Z3Ther: +d[' F_2_Z_3: Thermostat Temp'],
                        F2Z3TherC: +d[' F_2_Z_3: Thermostat Cooling Setpoint'],
                        F2Z3TherH: +d[' F_2_Z_3: Thermostat Heating Setpoint'],
                        F2Z3CO2: +d[' F_2_Z_3 RETURN OUTLET CO2 Concentration'],
                        F2Z3Mas: +d[' F_2_Z_3 SUPPLY INLET Mass Flow Rate'],
                        F2Z4Light: +d[' F_2_Z_4: Lights Power'],
                        F2Z4Equip: +d[' F_2_Z_4: Equipment Power'],
                        F2Z4Ther: +d[' F_2_Z_4: Thermostat Temp'],
                        F2Z4TherC: +d[' F_2_Z_4: Thermostat Cooling Setpoint'],
                        F2Z4TherH: +d[' F_2_Z_4: Thermostat Heating Setpoint'],
                        F2Z4CO2: +d[' F_2_Z_4 RETURN OUTLET CO2 Concentration'],
                        F2Z4Mas: +d[' F_2_Z_4 SUPPLY INLET Mass Flow Rate'],
                        F2Z5Light: +d[' F_2_Z_5: Lights Power'],
                        F2Z5Equip: +d[' F_2_Z_5: Equipment Power'],
                        F2Z5Ther: +d[' F_2_Z_5: Thermostat Temp'],
                        F2Z5TherC: +d[' F_2_Z_5: Thermostat Cooling Setpoint'],
                        F2Z5TherH: +d[' F_2_Z_5: Thermostat Heating Setpoint'],
                        F2Z5CO2: +d[' F_2_Z_5 RETURN OUTLET CO2 Concentration'],
                        F2Z5Mas: +d[' F_2_Z_5 SUPPLY INLET Mass Flow Rate'],
                        F2Z6Light: +d[' F_2_Z_6: Lights Power'],
                        F2Z6Equip: +d[' F_2_Z_6: Equipment Power'],
                        F2Z6Ther: +d[' F_2_Z_6: Thermostat Temp'],
                        F2Z6TherC: +d[' F_2_Z_6: Thermostat Cooling Setpoint'],
                        F2Z6TherH: +d[' F_2_Z_6: Thermostat Heating Setpoint'],
                        F2Z6CO2: +d[' F_2_Z_6 RETURN OUTLET CO2 Concentration'],
                        F2Z6Mas: +d[' F_2_Z_6 SUPPLY INLET Mass Flow Rate'],
                        F2Z7Light: +d[' F_2_Z_7: Lights Power'],
                        F2Z7Equip: +d[' F_2_Z_7: Equipment Power'],
                        F2Z7Ther: +d[' F_2_Z_7: Thermostat Temp'],
                        F2Z7TherC: +d[' F_2_Z_7: Thermostat Cooling Setpoint'],
                        F2Z7TherH: +d[' F_2_Z_7: Thermostat Heating Setpoint'],
                        F2Z7CO2: +d[' F_2_Z_7 RETURN OUTLET CO2 Concentration'],
                        F2Z7Mas: +d[' F_2_Z_7 SUPPLY INLET Mass Flow Rate'],
                        F2Z8Light: +d[' F_2_Z_8: Lights Power'],
                        F2Z8Equip: +d[' F_2_Z_8: Equipment Power'],
                        F2Z8Ther: +d[' F_2_Z_8: Thermostat Temp'],
                        F2Z8TherC: +d[' F_2_Z_8: Thermostat Cooling Setpoint'],
                        F2Z8TherH: +d[' F_2_Z_8: Thermostat Heating Setpoint'],
                        F2Z8CO2: +d[' F_2_Z_8 RETURN OUTLET CO2 Concentration'],
                        F2Z8Mas: +d[' F_2_Z_8 SUPPLY INLET Mass Flow Rate'],
                        F2Z9Light: +d[' F_2_Z_9: Lights Power'],
                        F2Z9Equip: +d[' F_2_Z_9: Equipment Power'],
                        F2Z9Ther: +d[' F_2_Z_9: Thermostat Temp'],
                        F2Z9TherC: +d[' F_2_Z_9: Thermostat Cooling Setpoint'],
                        F2Z9TherH: +d[' F_2_Z_9: Thermostat Heating Setpoint'],
                        F2Z9CO2: +d[' F_2_Z_9 RETURN OUTLET CO2 Concentration'],
                        F2Z9Mas: +d[' F_2_Z_9 SUPPLY INLET Mass Flow Rate'],
                        F2Z10Light: +d[' F_2_Z_10: Lights Power'],
                        F2Z10Equip: +d[' F_2_Z_10: Equipment Power'],
                        F2Z10Ther: +d[' F_2_Z_10: Thermostat Temp'],
                        F2Z10TherC: +d[' F_2_Z_10: Thermostat Cooling Setpoint'],
                        F2Z10TherH: +d[' F_2_Z_10: Thermostat Heating Setpoint'],
                        F2Z10CO2: +d[' F_2_Z_10 RETURN OUTLET CO2 Concentration'],
                        F2Z10Mas: +d[' F_2_Z_10 SUPPLY INLET Mass Flow Rate'],
                        F2Z11Light: +d[' F_2_Z_11: Lights Power'],
                        F2Z11Equip: +d[' F_2_Z_11: Equipment Power'],
                        F2Z11Ther: +d[' F_2_Z_11: Thermostat Temp'],
                        F2Z11TherC: +d[' F_2_Z_11: Thermostat Cooling Setpoint'],
                        F2Z11TherH: +d[' F_2_Z_11: Thermostat Heating Setpoint'],
                        F2Z11CO2: +d[' F_2_Z_11 RETURN OUTLET CO2 Concentration'],
                        F2Z11Mas: +d[' F_2_Z_11 SUPPLY INLET Mass Flow Rate'],
                        F2Z12ALight: +d[' F_2_Z_12A: Lights Power'],
                        F2Z12AEquip: +d[' F_2_Z_12A: Equipment Power'],
                        F2Z12ATher: +d[' F_2_Z_12A: Thermostat Temp'],
                        F2Z12ATherC: +d[' F_2_Z_12A: Thermostat Cooling Setpoint'],
                        F2Z12ATherH: +d[' F_2_Z_12A: Thermostat Heating Setpoint'],
                        F2Z12ACO2: +d[' F_2_Z_12A RETURN OUTLET CO2 Concentration'],
                        F2Z12AMas: +d[' F_2_Z_12A SUPPLY INLET Mass Flow Rate'],
                        F2Z12BLight: +d[' F_2_Z_12B: Lights Power'],
                        F2Z12BEquip: +d[' F_2_Z_12B: Equipment Power'],
                        F2Z12BTher: +d[' F_2_Z_12B: Thermostat Temp'],
                        F2Z12BTherC: +d[' F_2_Z_12B: Thermostat Cooling Setpoint'],
                        F2Z12BTherH: +d[' F_2_Z_12B: Thermostat Heating Setpoint'],
                        F2Z12BCO2: +d[' F_2_Z_12B RETURN OUTLET CO2 Concentration'],
                        F2Z12BMas: +d[' F_2_Z_12B SUPPLY INLET Mass Flow Rate'],
                        F2Z12CLight: +d[' F_2_Z_12C: Lights Power'],
                        F2Z12CEquip: +d[' F_2_Z_12C: Equipment Power'],
                        F2Z12CTher: +d[' F_2_Z_12C: Thermostat Temp'],
                        F2Z12CTherC: +d[' F_2_Z_12C: Thermostat Cooling Setpoint'],
                        F2Z12CTherH: +d[' F_2_Z_12C: Thermostat Heating Setpoint'],
                        F2Z12CCO2: +d[' F_2_Z_12C RETURN OUTLET CO2 Concentration'],
                        F2Z12CMas: +d[' F_2_Z_12C SUPPLY INLET Mass Flow Rate'],
                        F2Z14Light: +d[' F_2_Z_14: Lights Power'],
                        F2Z14Equip: +d[' F_2_Z_14: Equipment Power'],
                        F2Z14Ther: +d[' F_2_Z_14: Thermostat Temp'],
                        F2Z14TherC: +d[' F_2_Z_14: Thermostat Cooling Setpoint'],
                        F2Z14TherH: +d[' F_2_Z_14: Thermostat Heating Setpoint'],
                        F2Z14CO2: +d[' F_2_Z_14 RETURN OUTLET CO2 Concentration'],
                        F2Z14Mas: +d[' F_2_Z_14 SUPPLY INLET Mass Flow Rate'],
                        F2Z15Light: +d[' F_2_Z_15: Lights Power'],
                        F2Z15Equip: +d[' F_2_Z_15: Equipment Power'],
                        F2Z15Ther: +d[' F_2_Z_15: Thermostat Temp'],
                        F2Z15TherC: +d[' F_2_Z_15: Thermostat Cooling Setpoint'],
                        F2Z15TherH: +d[' F_2_Z_15: Thermostat Heating Setpoint'],
                        F2Z15CO2: +d[' F_2_Z_15 RETURN OUTLET CO2 Concentration'],
                        F2Z15Mas: +d[' F_2_Z_15 SUPPLY INLET Mass Flow Rate'],
                        F2Z16Light: +d[' F_2_Z_16: Lights Power'],
                        F2Z16Equip: +d[' F_2_Z_16: Equipment Power'],
                        F2Z16Ther: +d[' F_2_Z_16: Thermostat Temp'],
                        F2Z16TherC: +d[' F_2_Z_16: Thermostat Cooling Setpoint'],
                        F2Z16TherH: +d[' F_2_Z_16: Thermostat Heating Setpoint'],
                        F2Z16CO2: +d[' F_2_Z_16 RETURN OUTLET CO2 Concentration'],
                        F2Z16Mas: +d[' F_2_Z_16 SUPPLY INLET Mass Flow Rate'],
                        F3Z1Light: +d[' F_3_Z_1: Lights Power'],
                        F3Z1Equip: +d[' F_3_Z_1: Equipment Power'],
                        F3Z1Ther: +d[' F_3_Z_1: Thermostat Temp'],
                        F3Z1TherC: +d[' F_3_Z_1: Thermostat Cooling Setpoint'],
                        F3Z1TherH: +d[' F_3_Z_1: Thermostat Heating Setpoint'],
                        F3Z1CO2: +d[' F_3_Z_1 RETURN OUTLET CO2 Concentration'],
                        F3Z1Mas: +d[' F_3_Z_1 SUPPLY INLET Mass Flow Rate'],
                        F3Z2Light: +d[' F_3_Z_2: Lights Power'],
                        F3Z2Equip: +d[' F_3_Z_2: Equipment Power'],
                        F3Z2Ther: +d[' F_3_Z_2: Thermostat Temp'],
                        F3Z2TherC: +d[' F_3_Z_2: Thermostat Cooling Setpoint'],
                        F3Z2TherH: +d[' F_3_Z_2: Thermostat Heating Setpoint'],
                        F3Z2CO2: +d[' F_3_Z_2 RETURN OUTLET CO2 Concentration'],
                        F3Z2Mas: +d[' F_3_Z_2 SUPPLY INLET Mass Flow Rate'],
                        F3Z3Light: +d[' F_3_Z_3: Lights Power'],
                        F3Z3Equip: +d[' F_3_Z_3: Equipment Power'],
                        F3Z3Ther: +d[' F_3_Z_3: Thermostat Temp'],
                        F3Z3TherC: +d[' F_3_Z_3: Thermostat Cooling Setpoint'],
                        F3Z3TherH: +d[' F_3_Z_3: Thermostat Heating Setpoint'],
                        F3Z3CO2: +d[' F_3_Z_3 RETURN OUTLET CO2 Concentration'],
                        F3Z3Mas: +d[' F_3_Z_3 SUPPLY INLET Mass Flow Rate'],
                        F3Z5Light: +d[' F_3_Z_5: Lights Power'],
                        F3Z5Equip: +d[' F_3_Z_5: Equipment Power'],
                        F3Z5Ther: +d[' F_3_Z_5: Thermostat Temp'],
                        F3Z5TherC: +d[' F_3_Z_5: Thermostat Cooling Setpoint'],
                        F3Z5TherH: +d[' F_3_Z_5: Thermostat Heating Setpoint'],
                        F3Z5CO2: +d[' F_3_Z_5 RETURN OUTLET CO2 Concentration'],
                        F3Z5Mas: +d[' F_3_Z_5 SUPPLY INLET Mass Flow Rate'],
                        F3Z6Light: +d[' F_3_Z_6: Lights Power'],
                        F3Z6Equip: +d[' F_3_Z_6: Equipment Power'],
                        F3Z6Ther: +d[' F_3_Z_6: Thermostat Temp'],
                        F3Z6TherC: +d[' F_3_Z_6: Thermostat Cooling Setpoint'],
                        F3Z6TherH: +d[' F_3_Z_6: Thermostat Heating Setpoint'],
                        F3Z6CO2: +d[' F_3_Z_6 RETURN OUTLET CO2 Concentration'],
                        F3Z6Mas: +d[' F_3_Z_6 SUPPLY INLET Mass Flow Rate'],
                        F3Z7Light: +d[' F_3_Z_7: Lights Power'],
                        F3Z7Equip: +d[' F_3_Z_7: Equipment Power'],
                        F3Z7Ther: +d[' F_3_Z_7: Thermostat Temp'],
                        F3Z7TherC: +d[' F_3_Z_7: Thermostat Cooling Setpoint'],
                        F3Z7TherH: +d[' F_3_Z_7: Thermostat Heating Setpoint'],
                        F3Z7CO2: +d[' F_3_Z_7 RETURN OUTLET CO2 Concentration'],
                        F3Z7Mas: +d[' F_3_Z_7 SUPPLY INLET Mass Flow Rate'],
                        F3Z8Light: +d[' F_3_Z_8: Lights Power'],
                        F3Z8Equip: +d[' F_3_Z_8: Equipment Power'],
                        F3Z8Ther: +d[' F_3_Z_8: Thermostat Temp'],
                        F3Z8TherC: +d[' F_3_Z_8: Thermostat Cooling Setpoint'],
                        F3Z8TherH: +d[' F_3_Z_8: Thermostat Heating Setpoint'],
                        F3Z8CO2: +d[' F_3_Z_8 RETURN OUTLET CO2 Concentration'],
                        F3Z8Mas: +d[' F_3_Z_8 SUPPLY INLET Mass Flow Rate'],
                        F3Z9Light: +d[' F_3_Z_9: Lights Power'],
                        F3Z9Equip: +d[' F_3_Z_9: Equipment Power'],
                        F3Z9Ther: +d[' F_3_Z_9: Thermostat Temp'],
                        F3Z9TherC: +d[' F_3_Z_9: Thermostat Cooling Setpoint'],
                        F3Z9TherH: +d[' F_3_Z_9: Thermostat Heating Setpoint'],
                        F3Z9CO2: +d[' F_3_Z_9 RETURN OUTLET CO2 Concentration'],
                        F3Z9Mas: +d[' F_3_Z_9 SUPPLY INLET Mass Flow Rate'],
                        F3Z10Light: +d[' F_3_Z_10: Lights Power'],
                        F3Z10Equip: +d[' F_3_Z_10: Equipment Power'],
                        F3Z10Ther: +d[' F_3_Z_10: Thermostat Temp'],
                        F3Z10TherC: +d[' F_3_Z_10: Thermostat Cooling Setpoint'],
                        F3Z10TherH: +d[' F_3_Z_10: Thermostat Heating Setpoint'],
                        F3Z10CO2: +d[' F_3_Z_10 RETURN OUTLET CO2 Concentration'],
                        F3Z10Mas: +d[' F_3_Z_10 SUPPLY INLET Mass Flow Rate'],
                        F3Z11ALight: +d[' F_3_Z_11A: Lights Power'],
                        F3Z11AEquip: +d[' F_3_Z_11A: Equipment Power'],
                        F3Z11ATher: +d[' F_3_Z_11A: Thermostat Temp'],
                        F3Z11ATherC: +d[' F_3_Z_11A: Thermostat Cooling Setpoint'],
                        F3Z11ATherH: +d[' F_3_Z_11A: Thermostat Heating Setpoint'],
                        F3Z11ACO2: +d[' F_3_Z_11A RETURN OUTLET CO2 Concentration'],
                        F3Z11AMas: +d[' F_3_Z_11A SUPPLY INLET Mass Flow Rate'],
                        F3Z11BLight: +d[' F_3_Z_11B: Lights Power'],
                        F3Z11BEquip: +d[' F_3_Z_11B: Equipment Power'],
                        F3Z11BTher: +d[' F_3_Z_11B: Thermostat Temp'],
                        F3Z11BTherC: +d[' F_3_Z_11B: Thermostat Cooling Setpoint'],
                        F3Z11BTherH: +d[' F_3_Z_11B: Thermostat Heating Setpoint'],
                        F3Z11BCO2: +d[' F_3_Z_11B RETURN OUTLET CO2 Concentration'],
                        F3Z11BMas: +d[' F_3_Z_11B SUPPLY INLET Mass Flow Rate'],
                        F3Z11CLight: +d[' F_3_Z_11C: Lights Power'],
                        F3Z11CEquip: +d[' F_3_Z_11C: Equipment Power'],
                        F3Z11CTher: +d[' F_3_Z_11C: Thermostat Temp'],
                        F3Z11CTherC: +d[' F_3_Z_11C: Thermostat Cooling Setpoint'],
                        F3Z11CTherH: +d[' F_3_Z_11C: Thermostat Heating Setpoint'],
                        F3Z11CCO2: +d[' F_3_Z_11C RETURN OUTLET CO2 Concentration'],
                        F3Z11CMas: +d[' F_3_Z_11C SUPPLY INLET Mass Flow Rate']
                    }            
                })
            }
    
    
var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);
    svg.append("defs").selectAll("marker")
    .data(["a"])
    .enter().append("marker")
    .attr("id", function(d) { return d; })
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
    .append("path")
    .attr("d", "M0,-5L10,0L0,5");

var edges = [];
var fill = d3.scale.category10();

json.links.forEach(function (e) {
    // Get the source and target nodes
    var sourceNode = json.nodes.filter(function (n) {
        return n.id === e.source;
    })[0],
        targetNode = json.nodes.filter(function (n) {
            return n.id === e.target;
        })[0],
        count = e.count;

    // Add the edge to the array
    edges.push({
        source: sourceNode,
        target: targetNode,
        count: count,
        type: "a"
    });
});

var force = d3.layout.force()
    .gravity(0.01)
    .distance(500)
    .charge(-300)
    .linkDistance(300)
    .size([width, height])
    .nodes(json.nodes)
    .links(edges)
    .start();

var link =  svg.append("g").selectAll("link")
    .data(edges)
    .enter().append("path")
    .attr("class", "link")
    .style("stroke-width", function (d) {
    return Math.sqrt(d.count * 1, 5);
});


var node = svg.selectAll("node")
    .data(json.nodes)
    .enter().append("g")
    .attr("class", "node")
    .style("fill", function (d) {
    return fill(d.group);
})
    .call(force.drag).on("mouseover", fade(.1)).on("mouseout", fade(1))
    .on("click", function (d, i) {
        //console.log(d.id);
        var cur_id = d.id;
        
     if (cur_id !='F1' && cur_id !='F2' && cur_id != 'F3'){
            
        svg.selectAll(".node").style("fill", function (d) { return fill(d.group);});
        d3.select(".menu").remove();
        
    var thisNode = d3.select(this);
    thisNode.attr('r', 25).style("fill", "lightcoral");

    var menuDataSet = [{
        size: 2,
        label: "Light"
    }, {
        size: 1,
        label: "Equipment"
    }, {
        size: 65,
        label: "Thermostat"
    }, {
        size: 45,
        label: "CO2"
    }, {
        size: 50,
        label: "MassFlowRate"
    }];

    var color = d3.scale.category20();
    var pie = d3.layout.pie()
        .sort(null)
        .value(function (d) {
        return Object.keys(menuDataSet).length;
    }); 
        
    // Menu
    var widthMenu = 180,
        heightMenu = 180,
        radiusMenu = Math.min(widthMenu, heightMenu) / 2;

    // Arc setting
    var arc = d3.svg.arc()
        .innerRadius(radiusMenu - 70)
        .outerRadius(radiusMenu - 25);

    // Graph space
    var svgMenu = thisNode.append("svg")
        .attr("width", widthMenu)
        .attr("height", heightMenu)
        .attr("class","menu")
        .attr("x", -90)
        .attr("y", -90)
        .append("g")
        .attr("transform", "translate(" + widthMenu / 2 + "," + heightMenu / 2 + ")");

    // Prepare graph and load data
    var g = svgMenu.selectAll(".arc")
        .data(pie(menuDataSet))
        .enter().append("g")
        .attr("class", "arc");

    // Add colors
    var path = g.append("path")
        .attr("d", arc)
        .attr("fill", function (d) {
        return color(d.data.size);
    })

    // Add labels
    var asdfd = g.append("text")
        .attr("transform", function (d) {
        return "translate(" + arc.centroid(d) + ")";
    })
        .attr("dy", ".35em")
        .style("text-anchor", "middle")
        .text(function (d) {
        return d.data.label;
    });

    // Add hover action
    
    path.on("click", function (d, i) {

        var thisPath = d3.select(this);
        var label = d.data.label;
        
        thisPath.attr("fill", "blue")
            .attr("cursor", "pointer")
            .attr("class", "on");
        
        var zoneData = json.nodes.filter(function(d) {
                    return d.id == cur_id;
                });
        
        //Start Scatterplot Ploting
        var scaleX = d3.scale.linear()
        scaleX.range([45, 270]);
        scaleX.domain([0, d3.max(zoneData[0].Time)]);
        
        
        var scaleY = d3.scale.linear()
        scaleY.range([10,170]);
        if (d.data.label =='Light'){scaleY.domain([d3.max(zoneData[0].Lights),0]);}
        else if (d.data.label =='Equipment'){scaleY.domain([d3.max(zoneData[0].Equipment),0]);}
        else if (d.data.label =='Thermostat'){scaleY.domain([d3.max(zoneData[0].ThermoTemp),0]);}
        else if (d.data.label =='CO2'){scaleY.domain([d3.max(zoneData[0].CO2),0]);}
        else if (d.data.label =='MassFlowRate'){scaleY.domain([d3.max(zoneData[0].MassFlowRate),0]);}
        
        var axisX = d3.svg.axis().scale(scaleX).orient("bottom").ticks(0);
        var axisY = d3.svg.axis().scale(scaleY).orient("left").ticks(10);
        
        var scatplot = d3.select("#scatterplot");
        
        
        d3.select("#scatterplot").select("svg").remove();
        
        var scatsvg = d3.select("#scatterplot").append("svg")
                        .attr("width", 300)
                        .attr("height", 190)
        
        var line = d3.svg.line()
            .x(function(d) { return scaleX.range([45, 270])(d.Time);})
            .y(function(d) { 
               if (label =='Light'){
                         var yname = cur_id+'Light';
                         return scaleY.range([10,170])(d[yname]);}
                     else if (label =='Equipment'){
                         var yname = cur_id+'Equip';
                         return scaleY.range([10,170])(d[yname]);
                         }
                     else if (label =='Thermostat'){
                         var yname = cur_id+'Ther';
                         return scaleY.range([10,170])(d[yname]);
                         }
                     else if (label =='CO2'){
                         var yname = cur_id+'CO2';
                         return scaleY.range([10,170])(d[yname]);
                         }
                     else if (label =='MassFlowRate'){
                         var yname = cur_id+'Mas';
                         return scaleY.range([10,170])(d[yname]);
                         }
                });
        
        scatsvg.append('path')
                 .attr("class", "line")
                 .attr("d", line(zoneData2));
       
         scatsvg.append('g')
                .attr("class", "x axis")
                .attr("transform","translate(0,170)")
                .call(axisX)
                .append("text")
                .attr("y",5)
                .attr("x",295)
                .style("text-anchor", "end")
                .text("Time");
            
         scatsvg.append('g')
                .attr("class", "y axis")
                .attr("transform","translate(45,0)")
                .call(axisY)
                .append("text")
                .attr("y",8)
                .attr("x",15)
                .style("text-anchor", "end")
                .text(label);
        
        scatplot.style({
            'display':'block',
            'top':  d3.event.y +0+'px',
            'left': d3.event.x +0+'px'
        });
   
    })

    path.on("mouseout", function (d) {
        d3.select(this)
            .attr("fill", function (d) {
            return color(d.data.size);
        })
            .attr("class", "off");
        
        
        
        var scatplot = d3.select("#scatterplot");

        scatplot.style({
            'display':'none'
        });
    });
     }
});

node.append("circle").attr("r", 10);

node.append("text")
    .attr("dx", 12)
    .attr("dy", ".35em")
    .text(function (d) {
    return d.name
});
    
var labels = svg.selectAll('text')
    .data(edges)
    .enter().append('text')
    .attr("x", function (d) {
    return (d.source.y + d.target.y) / 2;
})
    .attr("y", function (d) {
    return (d.source.x + d.target.x) / 2;
})
    .attr("text-anchor", "middle")
    .text(function (d) {
    return d.count;
});


force.on("tick", function () {

    link.attr("d", function linkArc(d) {
  var dx = d.target.x - d.source.x,
      dy = d.target.y - d.source.y,
      dr = Math.sqrt(dx * dx + dy * dy);
  return "M" + d.source.x + "," + d.source.y + "A" + dr + "," + dr + " 0 0,1 " + d.target.x + "," + d.target.y;
}
);
    
    node.attr("transform", function (d) {
        return "translate(" + d.x + "," + d.y + ")";
    });

    labels.attr("x", function (d) {
        return (d.source.x + d.target.x + 10) / 2;
    })
        .attr("y", function (d) {
        return (d.source.y + d.target.y + 10) / 2;
    })


});

function transform(d) {
  return "translate(" + d.x + "," + d.y + ")";
}

var linkedByIndex = {};
edges.forEach(function (d) {
    linkedByIndex[d.source.index + "," + d.target.index] = 1;
});

function isConnected(a, b) {
    return linkedByIndex[a.index + "," + b.index] || linkedByIndex[b.index + "," + a.index] || a.index == b.index;
}


function fade(opacity) {
    return function (d) {

        var labels = svg.selectAll('text')
            .data(edges)
            .enter().append('text')
            .attr("x", function (o) {
            return (o.source.y + o.target.y) / 2;
        })
            .attr("y", function (o) {
            return (o.source.x + o.target.x) / 2;
        })
            .attr("text-anchor", "middle")
            .text(function (o) {
            return o.count;
        });

        node.style("stroke-opacity", function (o) {
            thisOpacity = isConnected(d, o) ? 1 : opacity;
            this.setAttribute('fill-opacity', thisOpacity);
            return thisOpacity;
        });

        link.style("stroke-opacity", function (o) {
            return o.source === d || o.target === d ? 1 : opacity;
        });
    };
}

</script>